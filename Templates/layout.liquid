{% assign directoryPrefix = "" %}
{% for i in (1..level) %}
	{% assign directoryPrefix = directoryPrefix | append: "../" %}
{% endfor %}

<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="{{ directoryPrefix }}reset.css" />
		{% if removeHighlight != true %}
			<link rel="stylesheet" href="{{ directoryPrefix }}highlight/styles/monokai-sublime.min.css" />
		{% endif %}
		<link rel="stylesheet" href="{{ directoryPrefix }}site.css" />

		<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400&display=swap" rel="stylesheet">

		{% if removeArticleFonts != true %}
			<link href="https://fonts.googleapis.com/css2?family=Vollkorn:wght@400;500;600;700;800&display=swap" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@200;300;400;500&display=swap" rel="stylesheet">
		{% else %}
			<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
			<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;500&display=swap" rel="stylesheet">
		{% endif %}
		
		<script src="https://unpkg.com/feather-icons@4.29.1/dist/feather.min.js"></script>

		<title>
			Ian Wold{% if title != "" %} | {{ title }} {% endif %}
		</title>

		{% if structuredData != "" %}
			<script type="application/ld+json">
				{{ structuredData }}
			</script>
		{% endif %}
	</head>
	<body>
		<button id="dark-mode-toggle"><i data-feather="sun"></i></button>

		<nav class="content">
			<div class="headshot">
				<img src="{{ directoryPrefix }}images/hero1.svg" width="150" height="154.41" />
			</div>
			<div class="title">
				<a href="{{ directoryPrefix }}index.html">Ian Wold</a>
			</div>
			<ul>
				<li><a href="{{ directoryPrefix }}about.html">About</a></li>
				<li><a href="https://buttondown.email/ianwold" target="_blank">Newsletter</a></li>
			</ul>
		</nav>
		
		{{ content | raw }}

		<footer>
			<div class="content content-footer">
				<span>
					Copyright &copy; Ian Wold. Site generated by <a href="https://www.github.com/IanWold/Metalsharp">Metalsharp</a> and hosted by <a href="https://www.github.com/IanWold/ianwold.github.io">GitHub Pages</a>.
				</span>
				<div class="icon-links">
					<a href="https://github.com/ianwold"><i data-feather="github"></i></a>
					<a href="mailto:ian@wold.guru?subject=Hello"><i data-feather="mail"></i></a>
					<a href="https://buttondown.email/ianwold" target="_blank"><i data-feather="book"></i></a>
					<a href="https://ian.wold.guru/feed.xml" target="_blank"><i data-feather="rss"></i></a>
				</div>
			</div>
		</footer>

		{% if removeHighlight != true %}
			<script src="{{ directoryPrefix }}highlight/highlight.min.js"></script>
		{% endif %}
		<script>
			feather.replace();
			{% if removeHighlight != true %}
				hljs.highlightAll();
			{% endif %}

			window.addEventListener('DOMContentLoaded', () => {
				const observer = new IntersectionObserver(entries => {
					entries.forEach(entry => {
						const id = entry.target.getAttribute('id');
						let classList = document.querySelector(`.pane li a[href="#${id}"]`).parentElement.classList;

						if (entry.intersectionRatio > 0) {
							classList.add('active');
						} else {
							classList.remove('active');
						}
					});
				});

				document.querySelectorAll('section[id]').forEach((section) => {
					observer.observe(section);
				});
			});

			const darkModeToggle = document.getElementById("dark-mode-toggle");
			const body = document.body;

			function toggleDarkMode() {
				body.classList.toggle("dark");

				if (localStorage.getItem("dark") === "enabled") {
					localStorage.setItem("dark", "disabled");
				} else {
					localStorage.setItem("dark", "enabled");
				}
			}

			darkModeToggle.addEventListener("click", toggleDarkMode);

			if (localStorage.getItem("dark") === "enabled") {
				body.classList.toggle("dark");
			}
		</script>
	</body>
</html>
